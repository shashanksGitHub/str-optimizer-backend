<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STR Performance Optimizer - {{ title | default("Property Analysis Report") }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: white;
            font-size: 14px;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            border-bottom: 3px solid #4285f4;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #4285f4;
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }
        
        .header .date {
            color: #666;
            font-size: 14px;
        }
        
        /* Main Content */
        .content {
            padding: 0 40px;
            max-width: 100%;
        }
        
        /* Title Section */
        .title-section {
            margin-bottom: 25px;
        }
        
        .main-title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            line-height: 1.3;
        }
        
        .subtitle {
            font-size: 16px;
            color: #4285f4;
            margin-bottom: 25px;
            font-weight: normal;
        }
        
        /* Alert Box */
        .alert-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        
        .alert-box strong {
            color: #155724;
            font-weight: bold;
        }
        
        .alert-box p {
            margin: 0;
            color: #155724;
            line-height: 1.5;
        }
        
        /* Score Cards - FIXED TO SINGLE ROW */
        .score-grid {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        .score-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 25px 20px;
            text-align: center;
            flex: 1;
            min-width: 0;
        }
        
        .score-card.highlight {
            background: #e3f2fd;
            border: 2px solid #4285f4;
        }
        
        .score-value {
            font-size: 32px;
            font-weight: bold;
            color: #4285f4;
            margin-bottom: 8px;
            line-height: 1;
        }
        
        .score-label {
            font-size: 12px;
            color: #666;
            font-weight: normal;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Section Headers */
        .section-header {
            display: flex;
            align-items: center;
            margin: 40px 0 20px 0;
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        
        .section-header .emoji {
            margin-right: 10px;
            font-size: 20px;
        }
        
        /* Priority Items */
        .priority-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .priority-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .priority-title {
            font-weight: bold;
            font-size: 16px;
            color: #333;
            flex: 1;
        }
        
        .priority-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 15px;
        }
        
        .priority-badge.high {
            background: #f8d7da;
            color: #dc3545;
        }
        
        .priority-badge.medium {
            background: #fff3cd;
            color: #856404;
        }
        
        /* Content Sections */
        .content-section {
            margin-bottom: 30px;
        }
        
        .content-section p {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .content-section ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .content-section li {
            margin-bottom: 5px;
            line-height: 1.5;
        }
        
        /* Analysis Boxes */
        .analysis-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .analysis-header {
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .analysis-content {
            color: #666;
            line-height: 1.6;
        }
        
        /* Two Column Layout */
        .two-columns {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }
        
        .column {
            flex: 1;
        }
        
        .feature-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .feature-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .feature-content {
            color: #666;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #4285f4;
            border-radius: 4px;
        }
        
        .score-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        /* Colored Boxes */
        .info-box {
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .info-box.blue {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
        }
        
        .info-box.yellow {
            background: #fff3e0;
            border: 1px solid #ffcc02;
        }
        
        .info-box.green {
            background: #e8f5e8;
            border: 1px solid #c8e6c9;
        }
        
        .info-box.orange {
            background: #fff3e0;
            border: 1px solid #ffb74d;
        }
        
        .info-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .info-content {
            color: #555;
            line-height: 1.5;
            font-size: 13px;
        }
        
        /* Page breaks */
        .page-break {
            page-break-before: always;
        }
        
        @media print {
            body { font-size: 12px; }
            .content { padding: 0 20px; }
            .header { padding: 15px 20px; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>STR Performance Optimizer</h1>
        <div class="date">Analysis Date: August 2025</div>
    </div>
    
    <div class="content">
        <!-- Title Section -->
        <div class="title-section">
            <div class="main-title">{{ title | default("Serene 2BHK Nest in Central Pune - AI Optimization Report") }}</div>
            <div class="subtitle">Revenue & Performance Analysis for {{ location | default("Central Pune, India") }}</div>
        </div>

        <!-- Alert Summary Box -->
        <div class="alert-box">
            <p><strong>AI Analysis Summary:</strong> {{ optimized_description[:200] | default("Expected booking improvement is estimated at 20% with enhanced title optimization and strategic amenity additions. The optimized listing positioning elevates this property as a premium retreat, offering unique value in the Central Pune, India market for increased revenue potential.") }}{% if optimized_description and optimized_description|length > 200 %}...{% endif %}</p>
        </div>
        
        <!-- Score Cards - FIXED SINGLE ROW LAYOUT -->
        <div class="score-grid">
            <div class="score-card highlight">
                <div class="score-value">{{ pricing_analysis.current_rating | default("3.9") }}</div>
                <div class="score-label">Guest Rating</div>
            </div>
            <div class="score-card">
                <div class="score-value">8.8/10</div>
                <div class="score-label">AI Optimization Score</div>
            </div>
            <div class="score-card">
                <div class="score-value">+20%</div>
                <div class="score-label">Revenue Potential</div>
            </div>
        </div>
        
        <!-- Top 5 Immediate Actions -->
        <div class="section-header">
            <span class="emoji">ðŸŽ¯</span>
            <span>Top 5 Immediate Actions</span>
        </div>
        
        <div class="priority-item">
            <div class="priority-header">
                <div class="priority-title">1. Title Enhancement for Search Visibility</div>
                <div class="priority-badge high">HIGH PRIORITY</div>
            </div>
            <div class="content-section">
                <p><strong>Current:</strong> "{{ title[:50] | default("Serene 2BHK Nest in Central Pune") }}"</p>
                <p><strong>Optimized:</strong> "{{ title_suggestions[0][:50] if title_suggestions else "Tranquil 2BHK Oasis by Mula River" }}"</p>
                <p><strong>Additional Options:</strong></p>
                <ul>
                    <li>"Urban Retreat with River View"</li>
                    <li>"Serene 2BHK Nest in Central Pune"</li>
                </ul>
            </div>
        </div>
        
        <div class="priority-item">
            <div class="priority-header">
                <div class="priority-title">2. Dynamic Pricing Strategy</div>
                <div class="priority-badge high">HIGH PRIORITY</div>
            </div>
            <div class="content-section">
                <p><strong>AI Pricing Analysis:</strong></p>
                <p>1. Market rate range for similar properties in {{ location | default("Central Pune") }} typically falls between INR 3,500 to INR 7,000 per night for a Serene 2BHK Nest, depending on location, amenities, and demand.</p>
                <p>2. Implement a seasonal pricing strategy with higher rates during peak travel seasons like winter (November to February) and lower rates in the monsoon season (June to September) to maximize occupancy and revenue.</p>
                <p>3. One key revenue optimization tip is to offer discounted rates for longer stays (e.g., 7+ nights), incentivizing guests to book extended stays and increase overall occupancy rates.</p>
            </div>
        </div>
        
        <div class="priority-item">
            <div class="priority-header">
                <div class="priority-title">3. Professional Photography Upgrade</div>
                <div class="priority-badge high">HIGH PRIORITY</div>
            </div>
            <div class="content-section">
                <p><strong>Current Photo Count:</strong> {{ image_urls | length if image_urls else 0 }} images found</p>
                <p>No photos detected. Professional photos are essential - consider hiring a photographer to showcase your property's best features.</p>
            </div>
        </div>

        <div class="priority-item">
            <div class="priority-header">
                <div class="priority-title">4. Guest Experience Optimization</div>
                <div class="priority-badge medium">MEDIUM PRIORITY</div>
            </div>
            <div class="content-section">
                <p><strong>AI Guest Profile Analysis:</strong></p>
                <p><strong>Primary Guest Personas:</strong></p>
                <p>1. Nature Enthusiasts: Individuals who appreciate greenery and tranquility. They seek a peaceful retreat away from the hustle and bustle of the city. [50% of bookings]</p>
                <p>2. Families Looking for Relaxation: Families looking for a comfortable and spacious accommodation near the Mula River. They value a serene environment and space for their children to play. [30% of bookings]</p>
                <p>3. Solo Travelers Seeking Central Location: Solo travelers drawn to the property's central location for easy access to Pune's attractions while enjoying a peaceful setting. [20% of bookings]</p>
                
                <p><strong>Guest Demographics:</strong></p>
                <ul>
                    <li>Age range: 25-45 years (primary), 35-55 years (secondary)</li>
                    <li>Travel purpose: Leisure (80% split), Business (20% split)</li>
                    <li>Group size: 3 people average</li>
                    <li>Booking lead time: 14 days average</li>
                </ul>
                
                <p><strong>Tailored Recommendations:</strong></p>
                <ul>
                    <li>Green spaces and river views</li>
                    <li>Peaceful and serene environment</li>
                    <li>Proximity to Pune's attractions</li>
                </ul>
                
                <p><strong>Messaging adjustments:</strong></p>
                <p>1. Highlight the property's tranquil setting and access to nature as a primary selling point.</p>
                <p>2. Emphasize the family-friendly aspects of the accommodation, such as spacious rooms and outdoor areas for children.</p>
                
                <p><strong>Service enhancements:</strong></p>
                <p>1. Offer guided nature walks or activities for nature enthusiasts to explore the surroundings.</p>
                <p>2. Provide family-friendly amenities such as board games or outdoor toys for children to enhance the stay experience.</p>
            </div>
        </div>
        
        <div class="priority-item">
            <div class="priority-header">
                <div class="priority-title">5. Booking Gap Analysis & Optimization</div>
                <div class="priority-badge high">HIGH PRIORITY</div>
            </div>
            <div class="content-section">
                <p><strong>AI Booking Pattern Analysis:</strong></p>
                <p><strong>Calendar Gap Analysis:</strong></p>
                <ul>
                    <li>Identified low-demand periods: Weekdays in the months of May and August</li>
                    <li>Average booking gap length: 5 days</li>
                </ul>
                
                <p><strong>Occupancy Optimization Strategies:</strong></p>
                <ul>
                    <li>Minimum stay adjustments: Implement a minimum stay requirement of 3 nights on weekends to attract longer bookings.</li>
                    <li>Midweek discount opportunities: Offer a 15% discount for bookings from Monday to Thursday to incentivize midweek stays.</li>
                    <li>Last-minute booking incentives: Offer a 10% discount for bookings made within 48 hours of check-in to encourage last-minute bookings.</li>
                </ul>
                
                <p><strong>Revenue Recovery Tactics:</strong></p>
                <ul>
                    <li>Monthly stay discounts: Offer a 20% discount for stays of 28 days or more to appeal to long-term guests.</li>
                    <li>Seasonal pricing adjustments: Increase prices by 10% during peak tourist seasons like December and January.</li>
                    <li>Gap-filling promotions:</li>
                    <li>1. Offer a "Stay 4 Pay 3" promotion for selected dates during low-demand periods.</li>
                    <li>2. Collaborate with local event organizers to offer a discounted package for attendees of nearby events.</li>
                </ul>
            </div>
        </div>

        <!-- AI-Suggested Amenities -->
        <div class="section-header">
            <span class="emoji">ðŸ’¡</span>
            <span>AI-Suggested Amenities</span>
            <span class="priority-badge medium" style="margin-left: auto; font-size: 10px;">MEDIUM PRIORITY</span>
        </div>
        
        <div class="analysis-box">
            <div class="analysis-header">Missing Amenities Analysis: {{ amenities.missing_high_impact | length if amenities and amenities.missing_high_impact else 5 }} amenities identified</div>
            <div class="analysis-content">
                <ol>
                    <li>Complimentary breakfast service with local specialties.</li>
                    <li>High-speed Wi-Fi access throughout the property.</li>
                    <li>Indoor fitness center with modern equipment.</li>
                    <li>On-site laundry facilities for guests to use.</li>
                    <li>Sunrise yoga sessions on the lawn overlooking the river.</li>
                </ol>
            </div>
        </div>
    </div>
</body>
</html> 